<div class="drawer-side z-40">
  <label for="sidebar-drawer" class="drawer-overlay"></label>
  <aside class="flex flex-col min-h-screen w-72 bg-base-100 lg:sidebar-gradient border-r border-base-300 shadow-xl sidebar-mobile">
    <!-- Header Section -->
    <div class="sticky top-0 z-20 bg-base-100 lg:bg-base-100/95 lg:backdrop-blur-md border-b border-base-300/50 p-6">
      <div class="flex items-center justify-between">
        <!-- App Logo & Brand -->
        <a href="<%= authenticated_root_path %>" class="flex items-center gap-3 group">
          <div class="relative">
            <div class="w-9 h-9 bg-gradient-to-br from-primary to-secondary rounded-xl flex items-center justify-center transition-transform group-hover:scale-110 group-hover:rotate-3">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="text-white">
                <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z" fill="currentColor"/>
              </svg>
            </div>
            <div class="absolute -top-1 -right-1 w-3 h-3 bg-success rounded-full animate-pulse"></div>
          </div>
          <div class="flex flex-col">
            <span class="font-bold text-xl text-base-content group-hover:text-primary transition-colors">RailsStarter</span>
            <span class="text-xs text-base-content/60 font-medium">Rails 8 SaaS Kit</span>
          </div>
        </a>
        
        <!-- Mobile Close Button -->
        <label for="sidebar-drawer" class="btn btn-ghost btn-sm btn-circle lg:hidden">
          <%= icon "x-mark", class: "w-5 h-5" %>
        </label>
      </div>
      
    </div>

    <!-- Navigation Content -->
    <div class="flex-1 overflow-y-auto p-4 space-y-6 sidebar-scroll">
      <!-- Quick Actions -->
      <div class="space-y-2">
        <div class="flex items-center justify-between px-2 mb-3">
          <h3 class="text-xs font-semibold text-base-content/70 uppercase tracking-wider">Quick Actions</h3>
        </div>
        <div class="grid grid-cols-2 gap-2">
          <% navigation_items[:quick_actions].each do |action| %>
            <%= link_to action[:path], class: "btn btn-#{action[:style]} btn-sm gap-2 justify-start items-center quick-action-btn" do %>
              <%= icon action[:icon], class: "w-4 h-4 flex-shrink-0" %>
              <span class="text-xs"><%= action[:label] %></span>
            <% end %>
          <% end %>
        </div>
      </div>

      <!-- Main Navigation -->
      <div class="space-y-1">
        <div class="flex items-center px-2 mb-3">
          <h3 class="text-xs font-semibold text-base-content/70 uppercase tracking-wider">Main</h3>
        </div>
        <% navigation_items[:main].each do |item| %>
          <div class="relative">
            <%= link_to item[:path],
                class: "group flex items-center gap-3 px-3 py-3 rounded-xl #{active_link?(item[:path]) ? 'nav-item-active' : 'nav-item-hover'}" do %>
              <div class="relative flex items-center justify-center w-5 h-5">
                <%= icon item[:icon], class: "w-5 h-5 transition-transform #{active_link?(item[:path]) ? 'text-primary-content' : 'text-base-content/70 group-hover:text-primary group-hover:scale-110'}" %>
                <% if item[:badge] %>
                  <span class="absolute -top-2 -right-2 badge badge-xs badge-error text-xs min-h-4 h-4 px-1"><%= item[:badge] %></span>
                <% end %>
              </div>
              <div class="flex-1 min-w-0">
                <p class="font-medium text-sm <%= active_link?(item[:path]) ? 'text-primary-content' : 'text-base-content' %>">
                  <%= item[:label] %>
                </p>
                <p class="text-xs <%= active_link?(item[:path]) ? 'text-primary-content/70' : 'text-base-content/50' %> truncate">
                  <%= item[:description] %>
                </p>
              </div>
              <% if active_link?(item[:path]) %>
                <%= icon "chevron-right", class: "w-4 h-4 text-primary-content/70" %>
              <% end %>
            <% end %>
          </div>
        <% end %>
      </div>

      <!-- Workspace Navigation -->
      <div class="space-y-1">
        <div class="flex items-center px-2 mb-3">
          <h3 class="text-xs font-semibold text-base-content/70 uppercase tracking-wider">Workspace</h3>
        </div>
        <% navigation_items[:workspace].each do |item| %>
          <%= link_to item[:path],
              class: "group flex items-center gap-3 px-3 py-2.5 rounded-lg #{active_link?(item[:path]) ? 'bg-primary/10 text-primary border-l-4 border-primary' : 'nav-item-hover'}" do %>
            <div class="flex items-center justify-center w-4 h-4">
              <%= icon item[:icon], class: "w-4 h-4 transition-colors #{active_link?(item[:path]) ? 'text-primary' : 'text-base-content/60 group-hover:text-primary'}" %>
            </div>
            <div class="flex-1 min-w-0">
              <p class="font-medium text-sm <%= active_link?(item[:path]) ? 'text-primary' : 'text-base-content group-hover:text-base-content' %>">
                <%= item[:label] %>
              </p>
              <p class="text-xs text-base-content/50 truncate">
                <%= item[:description] %>
              </p>
            </div>
          <% end %>
        <% end %>
      </div>
    </div>

    <!-- Footer Section -->
    <div class="p-4 border-t border-base-300/50 bg-base-100 lg:bg-base-100/50">
      <!-- Storage Usage -->
      <div class="mb-4 p-3 bg-base-200/60 rounded-lg">
        <div class="flex items-center justify-between mb-2">
          <span class="text-xs font-medium text-base-content/70">Storage Used</span>
          <span class="text-xs text-base-content/70">2.3GB / 10GB</span>
        </div>
        <progress class="progress progress-primary w-full h-2" value="23" max="100"></progress>
      </div>

      <!-- Upgrade Banner -->
      <div class="p-3 bg-gradient-to-r from-primary/10 to-secondary/10 rounded-lg border border-primary/20">
        <div class="flex items-center gap-2 mb-2">
          <%= icon "sparkles", class: "w-4 h-4 text-primary" %>
          <span class="text-sm font-semibold text-base-content">Upgrade Available</span>
        </div>
        <p class="text-xs text-base-content/60 mb-3">Get unlimited storage and advanced features</p>
        <button class="btn btn-primary btn-xs w-full">
          Upgrade Now
        </button>
      </div>
    </div>
  </aside>
</div>